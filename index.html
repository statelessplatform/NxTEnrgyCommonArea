<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; script-src 'self'; img-src 'self' data:;">
    <title>Society Savings Calculator | NxTEnrgy</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üè¢</text></svg>">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1><span class="emoji">üè¢</span> Society Common Area Calculator</h1>
            <p class="subtitle">High-Volume Savings: NxTEnrgy vs. Competitor VNM</p>
        </header>

        <!-- VIEW TOGGLE SWITCH -->
        <div class="view-toggle-container">
            <span class="toggle-label" id="lblMonthly">Monthly View</span>
            <label class="switch">
                <input type="checkbox" id="viewToggle">
                <span class="slider round"></span>
            </label>
            <span class="toggle-label" id="lblYearly">Yearly View</span>
        </div>

        <div class="calculator-layout">
            <!-- INPUT SECTION -->
            <div class="input-panel">
                <div class="card control-card">
                    <div class="card-header">
                        <h2 class="card-title"><span class="emoji">‚ö°</span> Consumption</h2>
                    </div>
                    
                    <div class="slider-container">
                        <div class="slider-readout">
                            <span class="readout-value" id="unitsDisplay">5,000</span>
                            <span class="readout-unit" id="unitsLabel">Units / Month</span>
                        </div>
                        
                        <input type="range" id="unitSlider" min="5000" max="1000000" step="1000" value="5000" class="range-slider">
                        
                        <div class="slider-labels">
                            <span>5k</span>
                            <span>2.5L</span>
                            <span>5L</span>
                            <span>7.5L</span>
                            <span>10L</span>
                        </div>
                    </div>
                    
                    <div class="input-group manual-input">
                        <label for="manualUnits">Enter Monthly Units:</label>
                        <input type="number" id="manualUnits" min="5000" max="1000000" value="5000" step="1000">
                    </div>
                </div>

                <!-- COMPARISON BOX -->
                <div class="card vs-card">
                    <div class="vs-header">
                        <span class="emoji">ü•ä</span> Head-to-Head Savings
                    </div>
                    <div class="vs-content">
                        <div class="vs-row">
                            <span>NxTEnrgy Savings over Competitor:</span>
                            <strong class="vs-highlight" id="savingsVsCompetitor">‚Çπ0</strong>
                        </div>
                        <p class="vs-subtext" id="vsSubtext">Additional savings by choosing NxTEnrgy</p>
                    </div>
                </div>
            </div>

            <!-- OUTPUT SECTION -->
            <div class="output-panel">
                <div class="card results-card">
                    <div class="card-header">
                        <h2 class="card-title"><span class="emoji">üí∞</span> <span id="costTitle">Monthly</span> Cost Analysis</h2>
                    </div>

                    <div class="results-grid">
                        <!-- GRID COST -->
                        <div class="result-card">
                            <div class="result-label">Grid (MSEDCL)</div>
                            <div class="result-value" id="gridCost">‚Çπ0</div>
                            <div class="result-subtext">Estimated @ ‚Çπ10.50/unit</div>
                        </div>

                        <!-- COMPETITOR VNM -->
                        <div class="result-card secondary">
                            <div class="result-label">Competitor VNM</div>
                            <div class="result-value" id="competitorCost">‚Çπ0</div>
                            <div class="result-subtext">‚Çπ7.50/unit (Prepaid)</div>
                        </div>

                        <!-- NxTEnrgy -->
                        <div class="result-card highlight">
                            <div class="result-label"><span class="emoji">üöÄ</span> NxTEnrgy</div>
                            <div class="result-value" id="nxtCost">‚Çπ0</div>
                            <div class="result-subtext">‚Çπ5.50/unit + Fixed Fee</div>
                        </div>
                    </div>

                    <!-- TOTAL SAVINGS -->
                    <div class="total-savings-box">
                        <div class="savings-label"><span class="emoji">üéâ</span> Total <span id="totalSavingsLabel">Monthly</span> Savings vs. Grid</div>
                        <div class="savings-value" id="totalSavings">‚Çπ0</div>
                        <div class="savings-percent">You save <span id="savingsPercent">0%</span> on your bill!</div>
                    </div>
                </div>
            </div>
        </div>

        <button class="btn-icon" aria-label="Open user guide" data-action="guide">‚ùì</button>

        <dialog id="guideModal">
            <h2><span class="emoji">üè¢</span> Society Common Area Plan</h2>
            <p><strong>Designed for High Volume:</strong></p>
            <ul>
                <li><strong>View Options:</strong> Toggle between Monthly and Yearly views to see the big picture.</li>
                <li><strong>Grid Rate:</strong> Assumed ‚Çπ10.50/unit (Commercial/HT Average).</li>
            </ul>
            <p><strong>NxTEnrgy Advantage:</strong></p>
            <ul>
                <li><strong>Rate:</strong> ‚Çπ5.50/unit (Flat) + ‚Çπ200/mo Fixed.</li>
                <li><strong>Result:</strong> Massive savings multiplier when viewed Annually!</li>
            </ul>
            <button class="btn-primary modal-close" data-action="closeModal">Got it! <span class="emoji">‚ú®</span></button>
        </dialog>
    </div>

    <script src="app.js"></script>
</body>
</html>
