<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; script-src 'self'; img-src 'self' data:;">
    <title>Society Savings Calculator | NxTEnrgy</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üè¢</text></svg>">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1><span class="emoji">üè¢</span> Society Common Area Calculator</h1>
            <p class="subtitle">High-Volume Savings: NxTEnrgy vs. Competitor VNM</p>
        </header>

        <!-- VIEW TOGGLE SWITCH -->
        <div class="view-toggle-container">
            <span class="toggle-label" id="lblMonthly">Monthly</span>
            <label class="switch">
                <input type="checkbox" id="viewToggle">
                <span class="slider round"></span>
            </label>
            <span class="toggle-label" id="lblYearly">Annual</span>
        </div>

        <div class="calculator-layout">
            <!-- INPUT SECTION -->
            <div class="input-panel">
                <div class="card control-card">
                    <div class="card-header">
                        <h2 class="card-title"><span class="emoji">‚ö°</span> Monthly Consumption</h2>
                    </div>
                    
                    <div class="slider-container">
                        <div class="slider-readout">
                            <span class="readout-value" id="unitsDisplay">5,000</span>
                            <span class="readout-unit">Units per Month</span>
                        </div>
                        
                        <input type="range" id="unitSlider" min="5000" max="1000000" step="1000" value="5000" class="range-slider">
                        
                        <div class="slider-labels">
                            <span>5k</span>
                            <span>2.5L</span>
                            <span>5L</span>
                            <span>7.5L</span>
                            <span>10L</span>
                        </div>
                    </div>
                    
                    <div class="input-group manual-input">
                        <label for="manualUnits">Enter Average Monthly Units:</label>
                        <input type="number" id="manualUnits" min="5000" max="1000000" value="5000" step="1000">
                    </div>

                    <div class="info-box">
                        <span class="emoji">‚ÑπÔ∏è</span>
                        <p><strong>How it works:</strong> Enter your average monthly consumption. Toggle to "Annual" view to see 12-month projections.</p>
                    </div>
                </div>

                <!-- COMPARISON BOX -->
                <div class="card vs-card">
                    <div class="vs-header">
                        <span class="emoji">ü•ä</span> Head-to-Head Advantage
                    </div>
                    <div class="vs-content">
                        <div class="vs-row">
                            <span id="vsLabel">Monthly Savings over Competitor:</span>
                            <strong class="vs-highlight" id="savingsVsCompetitor">‚Çπ0</strong>
                        </div>
                        <p class="vs-subtext" id="vsSubtext">Extra savings with NxTEnrgy vs Competitor VNM</p>
                    </div>
                </div>
            </div>

            <!-- OUTPUT SECTION -->
            <div class="output-panel">
                <div class="card results-card">
                    <div class="card-header">
                        <h2 class="card-title">
                            <span class="emoji">üí∞</span> 
                            <span id="costTitle">Monthly</span> Cost Breakdown
                        </h2>
                    </div>

                    <div class="results-grid">
                        <!-- GRID COST -->
                        <div class="result-card">
                            <div class="result-label">Grid (MSEDCL)</div>
                            <div class="result-value" id="gridCost">‚Çπ0</div>
                            <div class="result-subtext">Slab-based + 16% duty + ‚Çπ130 fixed</div>
                        </div>

                        <!-- COMPETITOR VNM -->
                        <div class="result-card secondary">
                            <div class="result-label">Competitor VNM</div>
                            <div class="result-value" id="competitorCost">‚Çπ0</div>
                            <div class="result-subtext">@ ‚Çπ7.50/unit (Prepaid)</div>
                        </div>

                        <!-- NxTEnrgy -->
                        <div class="result-card highlight">
                            <div class="result-label"><span class="emoji">üöÄ</span> NxTEnrgy</div>
                            <div class="result-value" id="nxtCost">‚Çπ0</div>
                            <div class="result-subtext" id="nxtSubtext">@ ‚Çπ5.40/unit + ‚Çπ200/mo</div>
                        </div>
                    </div>

                    <!-- TOTAL SAVINGS -->
                    <div class="total-savings-box">
                        <div class="savings-label">
                            <span class="emoji">üéâ</span> 
                            <span id="totalSavingsLabel">Monthly</span> Savings vs Grid
                        </div>
                        <div class="savings-value" id="totalSavings">‚Çπ0</div>
                        <div class="savings-percent">You save <span id="savingsPercent">0%</span> on electricity costs!</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- 20 YEAR PROJECTION SECTION -->
        <div class="projection-section">
            <button class="projection-toggle" id="projectionToggle">
                <span class="emoji">üìä</span>
                <span class="projection-title">20-Year Savings Projection (with rate escalation & discount)</span>
                <span class="toggle-icon-proj" id="toggleIconProj">‚ñº</span>
            </button>
            
            <div class="projection-content" id="projectionContent">
                <div class="projection-intro">
                    <p><strong>Assumptions:</strong> MSEDCL rates increase 3% annually | NxTEnrgy rate ‚Çπ5.40 with 2% discount every 4 years | Solar degradation 1% annually</p>
                </div>

                <div class="projection-summary">
                    <div class="summary-card">
                        <span class="emoji">üí∞</span>
                        <h3>Total 20-Year Savings with NxTEnrgy</h3>
                        <div class="summary-value" id="total20YearSavings">‚Çπ0</div>
                        <p class="summary-note">Compared to staying with MSEDCL Grid</p>
                    </div>
                </div>

                <div class="table-container">
                    <table class="projection-table">
                        <thead>
                            <tr>
                                <th>Year</th>
                                <th>MSEDCL Cost</th>
                                <th>NxTEnrgy Rate</th>
                                <th>Annual Units</th>
                                <th>NxTEnrgy Cost</th>
                                <th>Annual Savings</th>
                            </tr>
                        </thead>
                        <tbody id="projectionTableBody">
                            <!-- Generated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- COMPLIANCE SECTION -->
        <div class="compliance-section">
            <button class="compliance-toggle" id="complianceToggle">
                <span class="emoji">üìã</span>
                <span class="compliance-title">Technical parameters for Solar Power friendly land parcel</span>
                <span class="toggle-icon" id="toggleIcon">‚ñº</span>
            </button>
            
            <div class="compliance-content" id="complianceContent">
                <div class="compliance-intro">
                    <p>Our site selection meets all recommended requirements set by <strong>MEDA</strong> and <strong>Niti Aayog</strong> for optimal solar energy production, ensuring maximum efficiency and sustainability.</p>
                </div>

                <h3 class="compliance-heading">Technical parameters for Solar Power friendly land parcel</h3>

                <div class="compliance-grid">
                    <div class="compliance-item">
                        <div class="item-header">
                            <div class="compliance-icon">‚òÄÔ∏è</div>
                            <div class="check-mark">‚úì</div>
                        </div>
                        <h4>High Solar Irradiance Zone</h4>
                        <p>Located in high solar irradiance zone as identified by MEDA and Niti Aayog, ensuring optimal energy generation throughout the year.</p>
                    </div>

                    <div class="compliance-item">
                        <div class="item-header">
                            <div class="compliance-icon">üèîÔ∏è</div>
                            <div class="check-mark">‚úì</div>
                        </div>
                        <h4>Flat Land Topology</h4>
                        <p>Flat terrain requiring minimal earthwork, reducing installation costs and environmental impact while maximizing solar panel efficiency.</p>
                    </div>

                    <div class="compliance-item">
                        <div class="item-header">
                            <div class="compliance-icon">üåû</div>
                            <div class="check-mark">‚úì</div>
                        </div>
                        <h4>Zero Shadowing</h4>
                        <p>Site features zero shadowing from surrounding structures or vegetation, ensuring uninterrupted solar exposure for maximum power output.</p>
                    </div>

                    <div class="compliance-item">
                        <div class="item-header">
                            <div class="compliance-icon">‚ö°</div>
                            <div class="check-mark">‚úì</div>
                        </div>
                        <h4>Proximity to MSEDCL Sub-Stations</h4>
                        <p>Within reasonable distance from at least 3 (three) MSEDCL sub-stations, facilitating efficient power evacuation and grid connectivity.</p>
                    </div>

                    <div class="compliance-item">
                        <div class="item-header">
                            <div class="compliance-icon">üíß</div>
                            <div class="check-mark">‚úì</div>
                        </div>
                        <h4>Natural Water Source Access</h4>
                        <p>Situated near natural water sources for panel cleaning and maintenance operations, ensuring sustained performance efficiency.</p>
                    </div>

                    <div class="compliance-item">
                        <div class="item-header">
                            <div class="compliance-icon">üõ£Ô∏è</div>
                            <div class="check-mark">‚úì</div>
                        </div>
                        <h4>Road & Highway Accessibility</h4>
                        <p>Easily accessible through proper roads and highways, enabling efficient logistics for construction, operations, and maintenance.</p>
                    </div>

                    <div class="compliance-item">
                        <div class="item-header">
                            <div class="compliance-icon">ü§ù</div>
                            <div class="check-mark">‚úì</div>
                        </div>
                        <h4>Community Support</h4>
                        <p>Located within a community that supports solar energy initiatives, ensuring smooth project implementation and long-term sustainability.</p>
                    </div>
                </div>

                <div class="validation-badge">
                    <span class="badge-icon">‚úì</span>
                    <div class="badge-content">
                        <h4>Site Validation Complete</h4>
                        <p>All technical and recommended requirements have been verified and validated. This location represents an ideal solar farm site with optimal conditions for maximum energy production and operational efficiency.</p>
                    </div>
                </div>
            </div>
        </div>

        <button class="btn-icon" aria-label="Open user guide" data-action="guide">‚ùì</button>

        <dialog id="guideModal">
            <h2><span class="emoji">üè¢</span> How This Calculator Works</h2>
            
            <h3>üìä Input Your Consumption</h3>
            <p>Enter your <strong>average monthly electricity consumption</strong> using the slider or manual input (5,000 to 10,00,000 units).</p>
            
            <h3>üîÑ Toggle View Mode</h3>
            <ul>
                <li><strong>Monthly View:</strong> Shows costs for one month of consumption</li>
                <li><strong>Annual View:</strong> Shows projected costs for 12 months (Monthly √ó 12)</li>
            </ul>
            
            <h3>üí° Understanding The Plans</h3>
            <ul>
                <li><strong>Grid (MSEDCL):</strong> Progressive slab rates (‚Çπ6.25 to ‚Çπ19.65/unit) + 16% duty + ‚Çπ130 fixed charge</li>
                <li><strong>Competitor VNM:</strong> ‚Çπ7.50/unit flat - Prepaid model with high upfront cost</li>
                <li><strong>NxTEnrgy:</strong> ‚Çπ5.40/unit + ‚Çπ200/month - Best value with 2% discount every 4 years</li>
            </ul>
            
            <h3>üìä 20-Year Projection</h3>
            <p>See long-term savings with realistic assumptions: MSEDCL increases 3%/year, NxTEnrgy offers 2% discount every 4 years, solar panel degradation 1%/year</p>
            
            <button class="btn-primary modal-close" data-action="closeModal">Got it! <span class="emoji">‚ú®</span></button>
        </dialog>
    </div>

    <script src="app.js"></script>
</body>
</html>
